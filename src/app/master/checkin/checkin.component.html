<!-- new for design-->
<div *ngIf="IsShowloader" class="text-center loader-block" style="position: absolute; z-index: 9999; left:42%; top:20%">
  <div class="loader animation-start">
    <span class="circle delay-1 size-2"></span>
    <span class="circle delay-2 size-4"></span>
    <span class="circle delay-3 size-6"></span>
    <span class="circle delay-4 size-7"></span>
    <span class="circle delay-5 size-7"></span>
    <span class="circle delay-6 size-6"></span>
    <span class="circle delay-7 size-4"></span>
    <span class="circle delay-8 size-2"></span>
  </div>
</div>

<div class="col-sm-12 col-xl-4">
   
   
  </div>


<div class="outerdiv">
  <div class="formdesign checkinforms" style="padding: 0;">

    <form [formGroup]="form" (ngSubmit)="Submit()" class=" shadow   mb-5 bg-white rounded" autocomplete="off">

      <div class="container">

        <div class='row tabouter'>

          <div class="col-md-12" style="padding-left: 0;">
            <div class="row">
              <div class="col-md-12">
                <!-- tab starting -->
                <ngb-tabset>
                  <ngb-tab title="Guest Information" >
                    <ng-template ngbTabContent>
                      <div [@fadeInOutTranslate] class="m-t-15">
                        <div class="row" style="border: 1px solid #dee2e6;  ">
                          <div class="col-md-12" style="  padding-right:0">
                            <div class="accouter" style="width: 100%;">
                              <ngb-accordion [closeOthers]="true" activeIds="ngb-close-p1" #acc="ngbAccordion"
                                class="ngb-accordion">
                                <ngb-panel id="ngb-close-p1"  title="Guest Information">
                                  <ng-template ngbPanelContent >
                                
                                     <div class="col-md-12" style="padding-left:0; padding-right:0">
                                       <div class="row">
                                         <div class="col-sm-12"> 
    
                                           <!--  test row 1-->
                                           <div class="userlist " style="margin-bottom: 30px; position: relative; padding-top:0">
                                            <div class="row" style="margin-bottom:0">
                                              <div class='col-12 col-sm-2'>
                                                <div class="form-group">                                
                                                  <label class="form-control-label" for="firstname">   </label>                                                                                                                  
                                                      <label >Room No </label>
                                                       <label style="padding-left: 3px; font-weight: bold;" >1000</label>                                                     
                                                 </div>       
                                              </div> 

                                              <div class="col-sm-4" style="padding-left: 0;">
                                                <div class="form-group">
                                                  <input type="checkbox"  (click)="openreferencedetails('effect-4',item)" class="form-control tooltip-form" id="refid" formControlName="referenceid" name="referenceid" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.referenceid.errors || form.controls.referenceid.touched || form.controls.referenceid.dirty}" required style="width: 15px; float: left;" /> Ref #
                                                  <div class="invalid-feedback" *ngIf="form.controls.referenceid.errors?.required" >referenceid Name is required</div>
                                                </div>
                                               
                                               </div>  
                                            
                                             </div>
                                          <div class="row " style="margin-bottom:0">
                                           
                                            <div class='col-12 col-sm-2'>
                                              <div class="form-group">
                                                <label class="form-control-label" for="firstname">Source </label>
                                               <select class="custom-select"  name="source" formControlName="source"  id="sourceid"> 
                                                 <option value="select">Select</option> 
                                                 <option  *ngFor="let itemsource of sourcemode" [value]="itemsource.Description">{{ itemsource.Description}}</option>
                                               </select>
                                               <div *ngIf="submitted && form.source.errors" class="invalid-feedback">
                                                <div *ngIf="form.source.errors.required">Source is required</div>
                                              </div>
                                                <!-- <small class="text-danger" [class.d-none]="!catageryhasError || catagery.untouched">Please choose a catagery</small> -->
                                               </div>  
                                            </div>
                                            
                                            <div class='col-12 col-sm-2'>
                                              <div class="form-group">
                                                <label class="form-control-label" for="arivalmode">Arrival Mode </label>
                                               <select class="custom-select"  name="arivalmode" formControlName="arivalmode"  id="arivalmodeid" [ngClass]="{ 'is-invalid': submitted && form.arivalmode.errors }"> 
                                                 <option value="select">Select</option> 
                                                 <option *ngFor="let sour of arrivalmode" [value]="sour.Description">{{ sour.Description  }}</option>
                                               </select>
                                               <div *ngIf="submitted && form.arivalmode.errors" class="invalid-feedback">
                                                <div *ngIf="form.arivalmode.errors.required">arivalmode is required</div>
                                              </div>
                                                </div>  
                                            </div>
                                            <div class='col-12 col-sm-2'>
                                              <div class="form-group">
                                                <label class="form-control-label" for="Booking">Booking Id </label>
                                                <input type="text" class="form-control tooltip-form" id="bookingid" formControlName="booking" name="booking" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.booking.errors || form.controls.booking.touched || form.controls.booking.dirty}" required  />  
                                                <div class="invalid-feedback" *ngIf="form.controls.booking.errors?.required" >booking Name is required</div>
                                                </div>  
                                            </div>
                                            <div class='col-12 col-sm-2'>
                                              <div class="form-group">
                                                <label class="form-control-label" for="Booking">Convenience fees </label>
                                                <input type="text" class="form-control tooltip-form" id="convenienceid" formControlName="convenience" name="convenience" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.convenience.errors || form.controls.convenience.touched || form.controls.convenience.dirty}" required  />  
                                                <div class="invalid-feedback" *ngIf="form.controls.convenience.errors?.required" >convenience fees is required</div>
                                                </div>  
                                            </div>
                                            <div class='col-12 col-sm-2'>
                                              <div class="form-group">
                                                <label class="form-control-label" for="Guest Name">Guest Name </label>
                                                <input type="text" class="form-control tooltip-form searchiconrelative" id="guestid" formControlName="guestname" name="guestname" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.guestname.errors || form.controls.guestname.touched || form.controls.guestname.dirty}" required    />  
                                                <a href="javascript:;" class="m-r-15 crm-action-view text-info searchiconabsoulte" (click)="openguestnamedetails('effect-5',data)" style="position: absolute;"><i class="fa fa-search"></i></a>
                                              
                                                <div class="invalid-feedback" *ngIf="form.controls.guestname.errors?.required" >guestname fees is required</div>
                                                </div>  
                                            </div>
                                            <div class='col-12 col-sm-2'>
                                              <div class="form-group">
                                                <label class="form-control-label" for="gender">  Gender </label>
                                               <select class="custom-select"  name="gender" formControlName="gender"  id="genderid" [ngClass]="{ 'is-invalid': submitted && form.gender.errors }"> 
                                                 <option value="select">Select</option> 
                                                 <option *ngFor="let sour of gendertypes" [value]="sour.Description">{{ sour.Description  }}</option>
                                               </select>
                                               <div *ngIf="submitted && form.gender.errors" class="invalid-feedback">
                                                <div *ngIf="form.gender.errors.required">gender is required</div>
                                              </div>
                                                </div>  
                                            </div>
                                        </div>
    
    
                                        <div class="row  " style="margin-bottom:0">
                                          
                                          <div class='col-12 col-sm-2'>
                                            <div class="form-group">
                                              <label class="form-control-label" for="mobile">Mobile </label>
                                              <input type="text" class="form-control tooltip-form" id="mobileid" formControlName="mobile" name="mobile" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.mobile.errors || form.controls.mobile.touched || form.controls.mobile.dirty}" required  />  
                                              <div class="invalid-feedback" *ngIf="form.controls.guestname.errors?.required" >mobile   is required</div>
                                              </div>  
                                          </div>
                                          <div class='col-12 col-sm-2'>
                                            <div class="form-group">
                                              <label class="form-control-label" for="email">Email </label>
                                              <input type="email" class="form-control tooltip-form" id="emailid" formControlName="email" name="email" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.email.errors || form.controls.email.touched || form.controls.email.dirty}" required  />  
                                              <div class="invalid-feedback" *ngIf="form.controls.mobile.errors?.required" >email   is required</div>
                                              </div>  
                                          </div>
                                          <div class='col-12 col-sm-2'>
                                            <div class="form-group">
                                              <label class="form-control-label" for="pincode">Pincode </label>
                                              <input type="text" class="form-control tooltip-form searchiconrelative" id="pincode" formControlName="pincode" name="pincode" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.pincode.errors || form.controls.pincode.touched || form.controls.pincode.dirty}" required style="position: relative;"  />  
                                              <a href="javascript:;" class="m-r-15 crm-action-view text-info" (click)="openMyModalPincode('effect-4',data)" style="position: absolute;top:22px; right:0"><i class="fa fa-search"></i></a>
                                           

                                              <div class="invalid-feedback" *ngIf="form.controls.pincode.errors?.required" >pincode   is required</div>
                                              </div>  
                                          </div>
                                          <div class='col-12 col-sm-2'>
                                            <div class="form-group">
                                              <label class="form-control-label" for="city">City </label>
                                              <input type="text" class="form-control tooltip-form searchiconrelative" id="city" formControlName="city" name="city" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.city.errors || form.controls.city.touched || form.controls.city.dirty}" required  />  
                                               <div class="invalid-feedback" *ngIf="form.controls.city.errors?.required" >city   is required</div>
                                              </div>  
                                          </div>
                                          <div class='col-12 col-sm-2'>
                                            <div class="form-group">
                                              <label class="form-control-label" for="state">State </label>
                                              <input type="text" class="form-control tooltip-form" id="state" formControlName="state" name="state" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.state.errors || form.controls.state.touched || form.controls.state.dirty}" required  />  
                                              <div class="invalid-feedback" *ngIf="form.controls.state.errors?.required" >state   is required</div>
                                              </div>  
                                          </div>
                                          <div class='col-12 col-sm-2'>
                                            <!-- <div class="form-group">
                                              <label class="form-control-label" for="nation">Nation </label>
                                              <input type="text" class="form-control tooltip-form" id="nation" formControlName="nation" name="nation" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.nation.errors || form.controls.nation.touched || form.controls.nation.dirty}" required  />  
                                              <div class="invalid-feedback" *ngIf="form.controls.nation.errors?.required" >nation   is required</div>
                                              </div>   -->

                                              <div class="form-group">
                                                  <label class="form-control-label" for="nation ">Nation</label>
                                                  <select class="custom-select" name="nation" formControlName="nation"
                                                    id="nation"
                                                    [ngClass]="{ 'is-invalid': submitted && form.nation.errors }">
                                                    <option value="select">Select</option> 
                                                    <option  *ngFor="let Nationd of Nationlist"
                                                      [value]="Nationd">{{ Nationd  }}</option>
                                                  </select>
                                                  <div *ngIf="submitted && form.nation.errors" class="invalid-feedback">
                                                    <div *ngIf="form.nation.errors.required">Nation </div>
                                                  </div>
                                                </div>

                                          </div>
                                          
                                         </div> <!-- end of row-->
                                        
                                           
    
                                           <div class="row" style="margin-bottom:0">
                                            <div class='col-12 col-sm-2'>
                                              <div class="form-group">
                                                <label class="form-control-label" for="Foreign Guest ">  Foreign Guest  </label>
                                               <select class="custom-select"  name="foriegnguest" formControlName="foriegnguest"  id="foriegnguest" [ngClass]="{ 'is-invalid': submitted && form.foriegnguest.errors }"> 
                                                 <option value="select">Select</option> 
                                                 <option [ngValue]="sour.Id" *ngFor="let sour of foriegnguest" [value]="sour">{{ sour  }}</option>
                                               </select>
                                               <div *ngIf="submitted && form.gender.errors" class="invalid-feedback">
                                                <div *ngIf="form.gender.errors.required">foriegnguest is required</div>
                                              </div>
                                                </div>  
                                            </div>
      
                                                  <div class='col-12 col-sm-2'>
                                                <div class="form-group">
                                                  <label class="form-control-label" for="gstno">GSTNO </label>
                                                  <input type="text" class="form-control tooltip-form" id="gstno" formControlName="gstno" name="gstno" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.gstno.errors || form.controls.gstno.touched || form.controls.gstno.dirty}" required  />  
                                                  <div class="invalid-feedback" *ngIf="form.controls.gstno.errors?.required" >gstno   is required</div>
                                                  </div>  
                                              </div>
    
                                            <div class='col-12 col-sm-2'>
                                              <div class="form-group">
                                                <label class="form-control-label" for="company">Company </label>
                                                <!-- <ng-select [ngClass]="'ng-select'"  id="company"  [allowClear]="true" [options]="simpleOption" name="company" formControlName="company" [(ngModel)]="selectedOption"></ng-select> -->
   
                                                  <input type="text" class="form-control tooltip-form" id="company" formControlName="company" name="company" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.company.errors || form.controls.company.touched || form.controls.company.dirty}" required  />   
                                                <div class="invalid-feedback" *ngIf="form.controls.company.errors?.required" >company   is required</div>
                                                </div>  
                                                <!-- <ng-select [ngClass]="'ng-select'" [options]="simpleOption" [(ngModel)]="selectedOption"> </ng-select> -->
                                            </div>
                                            <div class='col-12 col-sm-6'>
                                              <div class="form-group">
                                               <label class="form-control-label" for="address">Address </label>
                                               <textarea class="form-control col-sm-12" id="address" style="height:1.50rem" formControlName="address"  ></textarea>
                                               <div class="invalid-feedback" *ngIf="form.controls.address.errors?.required" >address   is required</div>
                                               </div>  
                                           </div> 
                                           </div> <!-- row end -->
    </div>
                                          
                                        
                                         </div> <!-- col-10 end-->
                                         <!-- <div class="col-sm-2" style="border: 1px solid yellow;">
                                          
                                            <div class=" ">
                                              <label style="font-size: 90%;">Thumb Verification *</label>
                                              <input type="checkbox" class="form-control tooltip-form" id="refid" formControlName="thumbverification" name="referenceid" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.referenceid.errors || form.controls.referenceid.touched || form.controls.referenceid.dirty}" required style="width: 15px; float: left;" /> 
    
                                               <img src="../../../assets/images/avatar-7.jpg" width="100%; height:auto">
                                              <div class="text-center m-t-10">
                                              <button type="button" class="btn btn-primary btn-xs m-r-10">OK</button>
                                               </div>
                                              
                                           </div>
                                         
                                         </div> -->
                                       </div>
                                     </div>
                                  </ng-template>
                                </ngb-panel>


                                <ngb-panel id="ngb-close-p1" title="Booking Table ">
                                  <ng-template ngbPanelContent>
                                    <div class="test123 userlist " style="padding: 2px;">
                                      <div class="grid-table" style="width: 100%;">
                                        <div class="thead">
                                          <div class="">
                                            <div class="td">RoomType</div>
                                            <div class="td">RoomNo</div>
                                            <div class="td">Pax</div>
                                            <div class="td">Plan</div>
                                            <div class="td">Food</div>
                                            <div class="td">Tariff</div>
                                            <div class="td">Tax</div>
                                            <div class="td">NetAmount</div>

                                            <div class="td">
                                              <button class="btn btn-outline-success" (click)="AddBokingButtonClick()">
                                                <i class="fa fa-plus"></i> Add
                                              </button>
                                            </div>
                                            <!-- <div class="td">
                                                <span *ngIf="notification" class="elementToFadeInAndOut">
                                                  <i class="fas fa-check-circle {{notification.class}}"></i>
                                                  {{notification.message}}
                                                </span>
                                              </div> -->
                                          </div>
                                        </div>
                                        <div class="tbody">

                                          <div formArrayName="other"
                                            *ngFor="let other of form.get('other').controls; let i = index">
                                            <div [formGroupName]="i">
                                              <div class="tr">
                                                <div class="td">
                                                  <select class="" formControlName="RoomCode"
                                                    (change)="RoomTypeChanged(i,'RoomCode')">
                                                    <option value="0">Select</option>
                                                    <option *ngFor="let items of roomtype" value="{{items.RoomCode}}">
                                                      {{items.RoomCode}}</option>
                                                  </select>
                                                </div>

                                                <div class="td">
                                                  <input class="" formControlName="RoomNo">
                                                </div>

                                                <div class="td">
                                                  <select class="" formControlName="Pax"
                                                    (change)="RoomTypeChanged(i,'Pax')">
                                                    <option value="0">Select</option>
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                    <option value="6">6</option>
                                                    <option value="7">7</option>

                                                  </select>
                                                </div>


                                                <div class="td">
                                                  <select class="" formControlName="PlanName"
                                                    (change)="RoomTypeChanged(i,'PlanName')">
                                                    <option value="0">Select</option>
                                                    <option *ngFor="let item of planlist" value="{{item.PlanName}}">
                                                      {{item.PlanName}}</option>
                                                  </select>
                                                </div>




                                                <div class="td">

                                                  <input type="text" class="" id="Food" formControlName="Food">
                                                </div>

                                                <div class="td">
                                                  <input class="" formControlName="Tariff"
                                                    (change)="RoomTypeChanged(i,'Tariff')">
                                                </div>

                                                <div class="td">
                                                  <input class="" formControlName="Tax">
                                                </div>

                                                <div class="td">
                                                  <input class="" formControlName="Grand"
                                                    (change)="RoomTypeChanged(i,'Grand')">
                                                </div>

                                                <div class="td">
                                                  <!-- <button type="submit" class="btn" [disabled]="fg.invalid"
                                                     [ngClass]="(form.get('bankAccountID').value==0)?'btn-success':'btn-outline-dark'"><i class="far fa-save fa-lg"></i>
                                                    
                                                 </button>  -->
                                                  <button (click)="onDelete(0,i)">
                                                    Remove
                                                  </button>
                                                </div>
                                              </div>
                                            </div>
                                          </div>


                                        </div>





                                      </div>
                                    </div>
                                  </ng-template>
                                </ngb-panel>




                                <ngb-panel id="ngb-close-p1" title="Guest Stay Information">
                                  <ng-template ngbPanelContent>
                                    <div class="row gueststayinfo userlist">

                                      <div class='col-12 col-sm-2'>
                                        <label class="form-control-label" for="pincode">Checkin Date </label>

                                        <div class="form-group">
                                          <div class="input-group">
                                            <input id="checkindate" name="checkindate"  formControlName="checkindate" placement="right" type="text" bsDatepicker [bsConfig]="datePickerConfig" class="form-control">
                                        
                                           
                                          </div>
                                        </div>
                                      </div>


                                      
                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="city">Checkin Time </label>
                                           <timepicker id="checkintime" name="checkintime"  (isValid)="isValid($event)"  [showSpinners]="false" formControlName="checkintime" [showMeridian]="ismeridian"></timepicker>
                                          <div *ngIf="!valid" class="alert alert-danger">Invalid time</div>

       
                                        </div>
                                      </div> 

                                      

                                      <!-- (change)="ChangeCheckoutDate(Days.value)"  -->
                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="nofdays "> No of Days </label>
                                          <select class="custom-select" #Days name="nofdays" formControlName="nofdays" (change)="ChangeCheckoutDate(Days.value)"
                                            id="nofdays" [ngClass]="{ 'is-invalid': submitted && form.nofdays.errors }">
                                            <option value="0">Select</option>
                                            <option  *ngFor="let Day of noofdays" [value]="Day">
                                              {{ Day  }}</option>
                                          </select>
                                          <div *ngIf="submitted && form.nofdays.errors" class="invalid-feedback">
                                            <div *ngIf="form.nofdays.errors.required">nofdays is required</div>
                                          </div>
                                        </div>
                                      </div>

                                     

                                      <div class='col-12 col-sm-2'>
                                        <label class="form-control-label" for="pincode">Checkout Date </label>

                                        <div class="form-group">
                                          <div class="input-group">
                                            <input id="checkoutdate" name="checkoutdate"  formControlName="checkoutdate" placement="right" type="text" bsDatepicker [bsConfig]="datePickerConfig" class="form-control">
                                          </div>
                                        </div>
                                      </div>



                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="checkouttime">Checkout Time </label>
                                          <timepicker id="checkouttime" name="checkouttime"  (isValid)="isValid($event)" [showSpinners]="false" formControlName="checkouttime" [showMeridian]="ismeridian"></timepicker>
                                        
<div *ngIf="!valid" class="alert alert-danger">Invalid time</div>
                                    
                                        </div>
                                      </div>



                                    </div>
                                  </ng-template>
                                </ngb-panel>
                                <ngb-panel id="ngb-close-p1" title="Advance Payment">
                                  <ng-template ngbPanelContent>
                                    <div class="row paymentrow userlist">

                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="selmode "> Select mode </label>
                                          <select class="custom-select" name="selmode" formControlName="selmode"
                                            id="selmode" [ngClass]="{ 'is-invalid': submitted && form.selmode.errors }">
                                            <option value="select">Select</option>
                                            <option *ngFor="let sour of paymentmode" [value]="sour">
                                              {{ sour  }}</option>
                                          </select>
                                          <div *ngIf="submitted && form.selmode.errors" class="invalid-feedback">
                                            <div *ngIf="form.selmode.errors.required">selmode is required</div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="payamount">Payment </label>
                                          <input type="text" class="form-control tooltip-form" id="payamount"
                                            formControlName="payamount" name="payamount" autocomplete="off"
                                            [ngClass]="{'is-invalid' : submitted && form.controls.payamount.errors || form.controls.payamount.touched || form.controls.payamount.dirty}"
                                            required />
                                          <div class="invalid-feedback"
                                            *ngIf="form.controls.payamount.errors?.required">payamount is required</div>
                                        </div>
                                      </div>
                                      <div class='col-12 col-sm-6'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="paymntdesc">Description </label>
                                          <textarea formControlName="paymntdesc" class="form-control " id="paymntdesc"
                                            style="height: 1.50rem;"></textarea>
                                          <div class="invalid-feedback"
                                            *ngIf="form.controls.paymntdesc.errors?.required">paymntdesc is required
                                          </div>
                                        </div>
                                      </div>


                                    </div>
                                  </ng-template>
                                </ngb-panel>

                                <ngb-panel id="ngb-close-p1" title="Discount /Grace Period">
                                  <ng-template ngbPanelContent>
                                    <div class="row discountouter userlist">

                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="DiscountType "> Discount Type </label>
                                          <select class="custom-select" name="disctype" formControlName="disctype"
                                            id="disctype"
                                            [ngClass]="{ 'is-invalid': submitted && form.disctype.errors }">
                                            <option value="select">Select</option>
                                            <option *ngFor="let sour of discounttypes"
                                              [value]="sour">{{ sour  }}</option>
                                          </select>
                                          <div *ngIf="submitted && form.disctype.errors" class="invalid-feedback">
                                            <div *ngIf="form.disctype.errors.required">Discount Type</div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="discvalue">Discount Value </label>
                                          <input type="text" class="form-control tooltip-form" id="discvalue"
                                            formControlName="discvalue" name="discvalue" autocomplete="off"
                                            [ngClass]="{'is-invalid' : submitted && form.controls.discvalue.errors || form.controls.discvalue.touched || form.controls.discvalue.dirty}"
                                            required />
                                          <div class="invalid-feedback"
                                            *ngIf="form.controls.discvalue.errors?.required">discvalue is required</div>
                                        </div>
                                      </div>
                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="discvalue">Grace Period </label>
                                          <input type="text" class="form-control tooltip-form" id="graceperiod"
                                            formControlName="graceperiod" name="graceperiod" autocomplete="off"
                                            [ngClass]="{'is-invalid' : submitted && form.controls.graceperiod.errors || form.controls.graceperiod.touched || form.controls.graceperiod.dirty}"
                                            required />
                                          <div class="invalid-feedback"
                                            *ngIf="form.controls.graceperiod.errors?.required">graceperiod is required
                                          </div>
                                        </div>
                                      </div>
                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label style="color: orange; padding-top: 20px;">Discount Type: </label>
                                          <label class="p-l-20">0 </label>
                                        </div>
                                      </div>
                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label style="color: orange;padding-top: 20px;">Last Discount: </label>
                                          <label class="p-l-20">0</label>

                                        </div>
                                      </div>

                                    </div> <!-- payment final row-->
                                   
                                  </ng-template>

                                </ngb-panel>






                                <ngb-panel id="ngb-close-p1" title="Other Details">
                                  <ng-template ngbPanelContent>
                                    <div class="row  " style="margin-bottom:0">

                                      <div class='col-12 col-sm-2'>
                                      

                                        <div class="form-group">
                                            <label class="form-control-label" for="Arrivalfrom">Arrivalfrom From</label>
                                            <input type="text" class="form-control tooltip-form" id="Vehicle"
                                              formControlName="Arrivalfrom" name="Arrivalfrom" autocomplete="off"/>
                                             
                                               
                                    
                                          </div>


                                      </div>
                                      <div class='col-12 col-sm-2'>
                                    

                                        <div class="form-group">
                                            <label class="form-control-label" for="Proceeding">Proceeding From</label>
                                            <input type="text" class="form-control tooltip-form" id="Vehicle"
                                              formControlName="Proceeding" name="Proceeding" autocomplete="off" />
                                              
                      
                                          </div>

                                      </div>
                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="visit ">Purposse of Visit</label>
                                          <select class="custom-select" name="visit" formControlName="visit"
                                            id="visit"
                                            [ngClass]="{ 'is-invalid': submitted && form.visit.errors }">
                                            <option value="select">Select</option>
                                            <option  *ngFor="let sour of purposeofvisit"
                                              [value]="sour.Description">{{ sour.Description  }}</option>
                                          </select>
                                          <div *ngIf="submitted && form.visit.errors" class="invalid-feedback">
                                            <div *ngIf="form.visit.errors.required">visit Type</div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class='col-12 col-sm-2'>
                                          <div class="form-group">
                                              <label class="form-control-label" for="Vehicle">Vehicle No</label>
                                              <input type="text" class="form-control tooltip-form" id="Vehicle"
                                                formControlName="Vehicle" name="Vehicle" autocomplete="off"
                                                [ngClass]="{'is-invalid' : submitted && form.controls.Vehicle.errors || form.controls.Vehicle.touched || form.controls.Vehicle.dirty}"
                                                required />
                                              <div class="invalid-feedback"
                                                *ngIf="form.controls.Vehicle.errors?.required">Vehicle is required</div>
                                            </div>



                                      </div>
                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="Bags ">No Of Bags</label>
                                          <select class="custom-select" name="Bags" formControlName="Bags"
                                            id="Bags"
                                            [ngClass]="{ 'is-invalid': submitted && form.Bags.errors }">
                                            <option value="select">Select</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                            <option value="6">6</option>
                                            <option value="7">7</option>
                                            <option value="8">8</option>
                                            <option value="9">9</option>
                                           
                                          </select>
                                          <div *ngIf="submitted && form.Bags.errors" class="invalid-feedback">
                                            <div *ngIf="form.Bags.errors.required">Bags Type</div>
                                          </div>
                                        </div>
                                      </div>

                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="news ">News Paper</label>
                                          <select class="custom-select" name="news" formControlName="news"
                                            id="news"
                                            [ngClass]="{ 'is-invalid': submitted && form.news.errors }">
                                            <option value="select">Select</option>
                                            <option *ngFor="let sour of newspaper"
                                              [value]="sour.Description">{{ sour.Description  }}</option>
                                          </select>
                                          <div *ngIf="submitted && form.news.errors" class="invalid-feedback">
                                            <div *ngIf="form.news.errors.required">news Type</div>
                                          </div>
                                        </div>
                                      </div>

                                    </div> <!-- payment final row-->


                                    <div class="row  " style="margin-bottom:0">
                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="Billing ">Billing Instruction</label>
                                          <select class="custom-select" name="Billing" formControlName="Billing"
                                            id="Billing"
                                            [ngClass]="{ 'is-invalid': submitted && form.Billing.errors }">
                                            <option value="select">Select</option>
                                            <option  *ngFor="let sour of billinginstruction"
                                              [value]="sour.Description">{{ sour.Description  }}</option>
                                          </select>
                                          <div *ngIf="submitted && form.Billing.errors" class="invalid-feedback">
                                            <div *ngIf="form.Billing.errors.required">Billing Type</div>
                                          </div>
                                        </div>
                                      </div>

                                      <div class='col-12 col-sm-2'>
                                        <div class="form-group">
                                          <label class="form-control-label" for="cometoknow ">How D U c to Know?</label>
                                          <select class="custom-select" name="cometoknow" formControlName="cometoknow"
                                            id="cometoknow"
                                            [ngClass]="{ 'is-invalid': submitted && form.cometoknow.errors }">
                                            <option value="select">Select</option>
                                            <option  *ngFor="let sour of howuknow"
                                              [value]="sour.Description">{{ sour.Description  }}</option>
                                          </select>
                                          <div *ngIf="submitted && form.cometoknow.errors" class="invalid-feedback">
                                            <div *ngIf="form.cometoknow.errors.required">cometoknow Type</div>
                                          </div>
                                        </div>
                                      </div>

                                      <div class='col-12 col-sm-2'>
                                          <label class="form-control-label" for="DOB">Date of Birth</label>
                                          <div class="form-group">
                                            <div class="input-group">
                                              <input id="DOB" name="DOB"  formControlName="DOB" placement="right" type="text" bsDatepicker [bsConfig]="datePickerConfig" class="form-control">                                     
                                            </div>
                                          </div>
                                        </div>

                                        <div class='col-12 col-sm-2'>
                                            <label class="form-control-label" for="DOA">Date of Anniversary</label>
                                            <div class="form-group">
                                              <div class="input-group">
                                                <input id="DOA" name="DOA"  formControlName="DOA" placement="right" type="text" bsDatepicker [bsConfig]="datePickerConfig" class="form-control">                                     
                                              </div>
                                            </div>
                                          </div>
                                     

                                          <div class="form-group">
                                              <label class="form-control-label" for="title ">Title</label>
                                              <select class="custom-select" name="title" formControlName="title"
                                                id="title"
                                                [ngClass]="{ 'is-invalid': submitted && form.title.errors }">
                                                <option value="select">Select</option> 
                                                <option  *ngFor="let Title of Titlelist"
                                                  [value]="Title.Description">{{ Title.Description  }}</option>
                                              </select>
                                              <div *ngIf="submitted && form.title.errors" class="invalid-feedback">
                                                <div *ngIf="form.title.errors.required">title </div>
                                              </div>
                                            </div>
                                    
                                    
                                    </div>


                                    <div class="col-md-12 p-b-5 p-t-5 userlist" style="border:2px solid #ccc; text-align: center; ">
                                      <button type="button" id="printgrcbtn" class="btn btn-primary ">PRINT GRC</button>
                                       <button type="submit" id="checkinbtn" class="btn btn-success m-r-5 m-l-5 ">Create Checkin</button> 
                                        
                                        
                                      <button type="button" id="closebtn" class="btn btn-danger">CLOSE</button>
                                    </div>
                                  </ng-template>

                                </ngb-panel>


                              </ngb-accordion>







                            </div>
                          </div>

                        </div>



                      </div>
                    </ng-template>
                  </ngb-tab>
                  <ngb-tab title="Guest Document">
                    <ng-template ngbTabContent>
                      <div [@fadeInOutTranslate] class="m-t-15">
                        <div class="col-md-6 border p-10 userlist">
                                 
                          <div class="row form-group">
                               <div class="col-md-12 ">
                                   <label >Id Proof</label>  
                                   <input type="file" class="form-control tooltip-form" id="state" formControlName="GuestPhotoPath" name="GuestPhotoPath" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.GuestPhotoPath.errors || form.controls.GuestPhotoPath.touched || form.controls.GuestPhotoPath.dirty}" required  />  
                                                <div class="invalid-feedback" *ngIf="form.controls.GuestPhotoPath.errors?.required" >GuestPhotoPath   is required</div>

                                    <div class="col-md-12 border p-10">
                                       <div class="row" style="margin-left:0">                                         
                                          <img [src]="previewUrl" style="width:100%;max-width:300px" />  
                                         </div>
                                   </div>
                               </div>
                                                                   
                             </div>
                           
                             <div class="row form-group" style="margin-left:0;margin-right:0">
                               <div class="col-md-6 border  ">
                                   <label  >Id Proof Front</label>
                                  <input type="file" class="form-control tooltip-form" id="GuestIdFront" formControlName="GuestIdFront" name="GuestIdFront" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.GuestIdFront.errors || form.controls.GuestIdFront.touched || form.controls.GuestIdFront.dirty}" required  />  

                                    <div class="invalid-feedback" *ngIf="form.controls.GuestIdFront.errors?.required" >GuestIdFront   is required</div>                                   
                                    <div class="row" style="margin-left:0;margin-right:0">
                                      <img [src]="previewUrl2"  style="width:100%;max-width:300px">
                                                                
                                    </div>
                               </div>
                               <div class="col-md-6 border  ">
                                   <label  >Id Proof Back</label>
                                   <input type="file" class="form-control tooltip-form" id="GuestIdBack" formControlName="GuestIdBack" name="GuestIdBack" autocomplete="off" [ngClass] = "{'is-invalid' : submitted && form.controls.GuestIdBack.errors || form.controls.GuestIdBack.touched || form.controls.GuestIdBack.dirty}" required  />  
                                    <div class="invalid-feedback" *ngIf="form.controls.GuestIdBack.errors?.required" >GuestIdBack   is required</div>

                                    <div class="row" style="margin-left:0;margin-right:0">
                                     <img [src]="previewUrl3"  style="width:100%;max-width:300px">                          
                                     </div>
                               </div>
                             </div>


                             
                       </div> <!-- border end -->
                      </div>
                    </ng-template>
                  </ngb-tab>
                  <ngb-tab title="Driver Commission">
                    <ng-template ngbTabContent>
                      <div [@fadeInOutTranslate] class="m-t-15">
                        <p class="m-4">3. This is Photoshop's version of Lorem IpThis is Photoshop's version of Lorem
                          Ipsum. Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum
                          auctor, nisi elit consequat ipsum, nec sagittis sem nibh id elit. Lorem ipsum dolor sit amet,
                          consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean mas Cum sociis natoque
                          penatibus et magnis dis.....</p>
                      </div>
                    </ng-template>
                  </ngb-tab>

                </ngb-tabset>
                <!-- tab ending -->


              </div>

            </div>
          </div>







        </div>
      </div><!-- container -->

    </form>
  </div>











</div>
<!-- end new form desing-->
<!-- lightbox-->
<app-modal-animation [modalID]="'effect-6'" [modalClass]="'md-effect-6'">
  <h3 class="f-15">View Other Tax Details</h3>

  <div class="app-modal-body text-center">
    <table class="table table-striped text-left m-t-10">
      <tr>
        <td>Id :</td>
        <td>{{ model.roomno }}</td>

      </tr>
      <tr>
        <td>ItemName :</td>
        <td>{{ model.roomno }}</td>
      </tr>

      <tr>
        <td>RevId :</td>
        <td>{{ model.roomno }}</td>
      </tr>
      <tr>
        <td>Rate :</td>
        <td>{{ model.roomno }}</td>
      </tr>
    </table>
    <button (click)="closeMyModal('effect-6')"
      class="btn btn-danger waves-effect m-r-20 f-w-600 md-close d-inline-block">Close</button>
  </div>

</app-modal-animation>


<!-- 
////guestname -->
<app-modal-animation [modalID]="'effect-5'" [modalClass]="'md-effect-5 addressmodeleffect'">
  <h3 class="f-15">Guest Details</h3>
 
    <div class="app-modal-body text-center" style="position: relative;"> 
   
    
      <div class="table-content crm-table">
        <div class="project-table addressproject-table">
          <div id="crm-contact" class="dt-responsive"  *ngIf="data1 | async as data">
            <div class="row">         
                  <div class="col-xs-12 col-sm-12 col-md-12">
                     <div >
                        <input type="search" [(ngModel)]="filterQuery" class="form-control input-lg full-data-search" placeholder="Search name" style="width: 100%!important; margin-left: 0; margin-bottom: 20px;"> 
                    </div> 
                  </div> 
      
            </div>
             
             <div class="table-responsive">
             
              <table class="table table-striped table-bordered full-data-table" [mfData]="data | dataFilter : filterQuery" #mf="mfDataTable" [mfRowsOnPage]="rowsOnPage" [(mfSortBy)]="sortBy" [(mfSortOrder)]="sortOrder"> 
                    <thead>
                    <tr class="blueorange-gradient">        
                    <th>
                     <mfDefaultSorter  by="GuestName">GuestName</mfDefaultSorter>
                     </th>               
                    <th>
                    <mfDefaultSorter  by="City">City</mfDefaultSorter>
                    </th>  
                    <th>
                    <mfDefaultSorter  by="Pincode">Pincode</mfDefaultSorter>
                    </th> 
                   
                    <th>
                      <mfDefaultSorter  by="MobileNo">MobileNo</mfDefaultSorter>
                      </th> 
                   
                        
                     <th>
                    <mfDefaultSorter>Action</mfDefaultSorter>
                    </th>
                </tr>
                <tr>
                </tr>
                </thead>
                <tbody>
                    
                 <tr *ngFor="let item of mf.data; let i = index;">                     
                   <td>{{item.GuestName}}</td>   
                   <td>{{item.City}}</td>   
                   <td>{{item.Pincode}}</td>
                   
                   <td>{{item.MobileNo}}</td>        
                  <td class="action-icon">
                      <a href="javascript:;" class="m-r-15 crm-action-edit text-primary"  md-button (click)="openMyGuestNameModalData(item,$event)">Get Details</a>
                      
                  </td>
                </tr>  
                </tbody>
                <tfoot>
                <tr class="blueorange-gradient">     
                <th>GuestName</th>            
                <th>City</th>    
                <th>Pincode</th> 
                <th>MobileNo</th>     
                <th>Action</th>      
                </tr>
                <tr>
                  <td colspan="6">
                    <mfBootstrapPaginator class="pagination-main f-right"></mfBootstrapPaginator>
                  </td>
                </tr>
                </tfoot>
              </table>
            </div> 
          </div>
        </div>
      </div>
     
           <button (click)="closeMyModalPin($event)" class="btn btn-danger waves-effect m-r-20 f-w-600 md-close d-inline-block">Close</button>    
          
      </div>
       
    </app-modal-animation>



<!-- //Pincode Search -->
<app-modal-animation [modalID]="'effect-4'" [modalClass]="'md-effect-4 addressmodeleffect'">
  <h3 class="f-15">Guest Details</h3>
 
    <div class="app-modal-body text-center" style="position: relative;"> 
   
    
      <div class="table-content crm-table">
        <div class="project-table addressproject-table">
          <div id="crm-contact" class="dt-responsive"  *ngIf="data | async as data">
            <div class="row">         
                  <div class="col-xs-12 col-sm-12 col-md-12">
                     <div >
                        <input type="search" [(ngModel)]="filterQuery" class="form-control input-lg full-data-search" placeholder="Search name" style="width: 100%!important; margin-left: 0; margin-bottom: 20px;"> 
                    </div> 
                  </div> 
      
            </div>
             
             <div class="table-responsive">
             
              <table class="table table-striped table-bordered full-data-table" [mfData]="data | dataFilter : filterQuery" #mf="mfDataTable" [mfRowsOnPage]="rowsOnPage" [(mfSortBy)]="sortBy" [(mfSortOrder)]="sortOrder"> 
                    <thead>
                    <tr class="blueorange-gradient">        
                    <th>
                     <mfDefaultSorter  by="AreaData">AreaData</mfDefaultSorter>
                     </th>               
                    <th>
                    <mfDefaultSorter  by="City">City</mfDefaultSorter>
                    </th>  
                    <th>
                    <mfDefaultSorter  by="Pincode">Pincode</mfDefaultSorter>
                    </th> 
                    <th>
                    <mfDefaultSorter  by="State">State</mfDefaultSorter>
                    </th> 
                     <th>
                    <mfDefaultSorter>Action</mfDefaultSorter>
                    </th>
                </tr>
                <tr>
                </tr>
                </thead>
                <tbody>
                    
                 <tr *ngFor="let item of mf.data; let i = index;">                     
                   <td>{{item.AreaData}}</td>   
                   <td>{{item.City}}</td>   
                   <td>{{item.Pincode}}</td>
                   <td>{{item.State}}</td>         
                  <td class="action-icon">
                      <a href="javascript:;" class="m-r-15 crm-action-edit text-primary"  md-button (click)="openMyPincodeModalData(item,$event)">Get Details</a>
                      
                  </td>
                </tr>  
                </tbody>
                <tfoot>
                <tr class="blueorange-gradient">     
                <th>Area</th>            
                <th>City</th>    
                <th>Pincode</th> 
                <th>State</th>     
                <th>Action</th>      
                </tr>
                <tr>
                  <td colspan="6">
                    <mfBootstrapPaginator class="pagination-main f-right"></mfBootstrapPaginator>
                  </td>
                </tr>
                </tfoot>
              </table>
            </div> 
          </div>
        </div>
      </div>
     
           <button (click)="closeMyModalPin($event)" class="btn btn-danger waves-effect m-r-20 f-w-600 md-close d-inline-block">Close</button>    
          
      </div>
       
    </app-modal-animation>


<app-modal-animation [modalID]="'effect-7'" [modalClass]="'md-effect-7'">
  <h3 class="f-15">City details</h3>

  <div class="app-modal-body text-center">
    <table class="table table-striped text-left m-t-10">
      <tr>
        <td>Id :</td>
        <td>{{ model.roomno }}</td>
      </tr>
      <tr>
        <td>ItemName :</td>
        <td>{{ model.roomno }}</td>
      </tr>

      <tr>
        <td>RevId :</td>
        <td>{{ model.roomno }}</td>
      </tr>
      <tr>
        <td>Rate :</td>
        <td>{{ model.roomno }}</td>
      </tr>
    </table>
    <button (click)="closeMyModal('effect-7')"
      class="btn btn-danger waves-effect m-r-20 f-w-600 md-close d-inline-block">Close</button>
  </div>

</app-modal-animation>